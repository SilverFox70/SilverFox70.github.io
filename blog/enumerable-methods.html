<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' text='text/css'>
    <title>WFB's Blog: Enumerables</title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/default.css" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/blog.css" />
    <meta charset="UTF-8">
  </head>

  <body>

    <div id="top-block">
         <nav id="alt_nav">
          <ul>
            <li><a href="http://silverfox70.github.io">Home</a></li>
            <li><a href="blog_index.html">Blog Index</a></li>
            <li><a href="../projects/index.html">Projects</a></li>
            <li><a href="#">Learn</a></li>
            <li><a href="../about.html">About Me</a></li>
            <li><a href="#">Resume</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </nav>

        <section id="splash">
          <h1>William Brinkert's Blog</h1>
          <p>Devloper/Designer In Training</p>
        </section>
    </div>


    <main>
      <h1>Ruby's Enumerable Method #group_by</h1>
      <h2>Easy to use, but powerful</h2>
      <h4>October 31, 2015</h4>

      <article class="main_article">
        <p>Ruby has a multitude of built in, ready to go methods that are flexible and powerful.  So many
          in fact that if you are used to programming in other languages, like Java or C++, it might seem
          like you are cheating when writing Ruby code because they have done so much of the work for us.
          The trick sometimes is to find the right method for the job, and a lot of that comes down to your
          personal programming style and preference.
        </p>

        <p>But you also need to know where you can look to find methods that may be useful for your purposes.
          That could be a very large topic, so let's just look at some types of objects you might often find
          yourself using, such as arrays and hashes.  Both arrays and hashes are their own distinct classes.
          Each class has its own set of methods.  You can find this information in the Ruby API documentation
          for <a href="http://ruby-doc.org/core-2.2.3/Array.html">arrays here</a> and for <a href="http://ruby-doc.org/core-2.2.3/Hash.html">hashes here</a>.  But both arrays and hashes can also use the module Enumerable and you can 
          find that documentation <a href="http://ruby-doc.org/core-2.2.3/Enumerable.html">here</a>. So what 
          is the difference between a Class and Module?  Classes are about Objects which can have instances.
          Modules are more abstract and they provide methods that can be used across multiple Classes. You 
          cannot have an instance of a Module - it is more like a library of goodies that you can use on certain
          Classes that have an interface with that Module.
        </p>

        <p>Today we are going to look at the method #group_by which can be found in the Module Enumerable. To
          quote directly from the Ruby 2.2.3 API:
        </p>
        <h4>group_by {|obj| block} → a_hash</h4>
        <h4>group_by → an_enumerator</h4>
        <p>Groups the collection by the result of the block.  Returns a hash where the keys are the evaluated
          result from the block and the values are the arrays of elements in the collection that correspond to
          the key.  If no block is given, an enumerator is returned instead.
        </p>

        <p>And they provide a helpful little example so that you can see what the method does></p>

        <code>
          (1..6).group_by { |i| i%3 } <span class="green">#=> {0 => [3, 6], 1 => [1, 4], 2 => [2, 5]}</span> 
        </code>  

        <p>So group_by in this case takes each element in the block and finds the answer to i % 3.  For each answer
          type it gets it builds an array of elements that yield the same answer.  The answer value is stored
          as the Key in the hash and the array of elements which yield the same answer are stored as the corresponding
          Value.  Looking at our returned hash we see that zero occurs when either 3 or 6 are evaluated by i % 3.  Each
          distinct possible answer generated by the evaluation of the expression in the block will result in a new
          key/value pair being added to the hash.
        </p>

        <p>Now, that example might not seems to jump off the page as particularly exciting or useful.  But let's look
          at other ways that we could use this handy method.  It's power is in the ability to take a collection of
          data and group it in some or any way that might be useful to us. It can be an extremely useful tool if you
          need to figure out the frequency with which a certain things is happening.  Take a look at this code below:
        </p>

        <code>set = [] <br>
          1000.times {set << rand(100)} #create a random data set <br>
          grp = set.group_by { |x| x } <br>
          sorted_groups = grp.sort_by { |k, v| k } <br>
          sorted_group.each do |k, v| <br>
            print "#{k} : " <br>
            puts "*" * v.length <br>
          end <br>
        </code> 

        <p>The output of this program looks something like this:</p>

        <p>
          0 :**************************************************************************** <br>
          1 :********************************************************************* <br>
          2 :******************************************************************* <br>
          3 :*************************************************************************** <br>
          4 :**************************************************************** <br>
          5 :****************************************************************************** <br>
          6 :***************************************************************** <br>
          7 :*********************************************************************** <br>
          8 :***************************************************************** <br>
          9 :********************************************************************** <br>
        </p>  

        <p>The data set here is arbitrary and generated randomly, but the point is that group_by easily
          groups the data so that we can see the frequency with which certain numbers (or ranges of numbers)
          are occuring in any given data set.  That is a wonderful tool for data analysis!  Interesting to
          note that Ruby's random number generator don't evenly distribute numbers over this many iterations,
          which is to be expected.  But try this code snippet out on your own and you'll find that if you
          run about a million iterations, the rand operator does almost completely flatten out to about
          0.1% variance between values ranging from 0 to 9.  
        </p>  
        <p>But how about a less mathy/geeky application?  Suppose you have a data collection of people and 
          their addresses and you want to separate them into groups depending on what state the live in.
          Group_by can easily and handily do this for you without having to write loops and conditionals.
          Check out this last code snippet to see how you could do this with both arrays and hashes.
        </p>    

        <code>peeps = [["john", "ca"], ["sam", "ny"], ["sara", "ca"], ["lucy", "ny"]] <br>
          people = peeps.to_h <br>
          sorted_peeps = peeps.group_by { |e| e[1]} <br>
          sorted_people = people.group_by { |k, v| v} <br>
          puts sorted_peeps <br>
          puts sorted_people <br>
        </code> 

        <p>And the output from that would be:</p>

        <p>{"ca"=>[["john", "ca"], ["sara", "ca"]], "ny"=>[["sam", "ny"], ["lucy", "ny"]]} <br>
          {"ca"=>[["john", "ca"], ["sara", "ca"]], "ny"=>[["sam", "ny"], ["lucy", "ny"]]}</p> 

        <p>I hope this provides some insight into the power of Ruby's built in methods. Happy hunting!</p>  

          <!-- copy and paste as many times as you want to add paragraphs -->
      </article>
    </main>

    <footer>
      <!-- Footer notes and copyright stuff goes here -->
      <nav id="social_nav">
        <h1>Follow me on:</h1>
        <ul>
          <li><a href="https://www.facebook.com/bill.brinkert" target="_blank">
              <img src="../imgs/facebook.png" alt="Facebook" >
            </a></li>
          <li><a href="https://twitter.com/wfbrinkert" target="_blank">
              <img src="../imgs/twitter.png" alt="Twitter" >
            </a></li>
          <li><a href="https://www.linkedin.com/in/billbrinkert" target="_blank">
              <img src="../imgs/linkedin.png" alt="LinkedIn" >
            </a></li>
          <li><a href="https://github.com/SilverFox70" target="_blank">
              <img src="../imgs/github.png" alt="LinkedIn" >
            </a></li> 
          <li><a href="//plus.google.com/u/0/107909704169849891520?prsrc=3" rel="publisher" target="_blank" style="text-decoration:none;"><img src="../imgs/gplus-48.png" alt="Google+"></a></li>     
        </ul>
      </nav>
    </footer> 


  </body>

</html>  